$(document).ready(function(){var t=$("meta[name=csrf-token]").attr("content");$(".profile-post-container").on("click",function(){var e,n=$(this).attr("id"),a=parseInt(n.substring(15,n.length)),o=$(this).closest(".col-lg-4").prev(".col-lg-4").find(".profile-post-container");if(o.length){var r=o.attr("id");e=parseInt(r.substring(15,n.length))}else e=-1;var i,c=$(this).closest(".col-lg-4").next(".col-lg-4").find(".profile-post-container");if(c.length){var s=c.attr("id");i=parseInt(s.substring(15,n.length))}else i=-1;$.ajax({url:"/post_modal",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},type:"GET",data:{authenticity_token:t,post_id:a,next:i,prev:e}})}),$(".container").on("click",".modal-image .left",function(){var e=$(this).attr("id"),n=parseInt(e.substring(5,e.length));$(".img-modal").remove(),$(".page-overlay").css("display","none");var a,o=$("#post-container-"+n).closest(".col-lg-4").prev(".col-lg-4").find(".profile-post-container");if(o.length){var r=o.attr("id");a=parseInt(r.substring(15,r.length))}else a=-1;var i,c=$("#post-container-"+n).closest(".col-lg-4").next(".col-lg-4").find(".profile-post-container");if(c.length){var s=c.attr("id");i=parseInt(s.substring(15,s.length))}else i=-1;$.ajax({url:"/post_modal",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},type:"GET",data:{authenticity_token:t,post_id:n,next:i,prev:a}})}),$(".container").on("click",".modal-image .right",function(){var e=$(this).attr("id"),n=parseInt(e.substring(6,e.length));$(".img-modal").remove(),$(".page-overlay").css("display","none");var a,o=$("#post-container-"+n).closest(".col-lg-4").prev(".col-lg-4").find(".profile-post-container");if(o.length){var r=o.attr("id");a=parseInt(r.substring(15,r.length))}else a=-1;var i,c=$("#post-container-"+n).closest(".col-lg-4").next(".col-lg-4").find(".profile-post-container");if(c.length){var s=c.attr("id");i=parseInt(s.substring(15,s.length))}else i=-1;$.ajax({url:"/post_modal",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},type:"GET",data:{authenticity_token:t,post_id:n,next:i,prev:a}})}),$(".container").on("click",".vote-call",function(e){e.preventDefault();var n=$(this).attr("id"),a=parseInt(n.substring(5,n.length));$.ajax({url:"/vote",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},type:"GET",data:{authenticity_token:t,post:a}})}),$("body").on("click",".modal-content",function(t){t.stopPropagation(),console.log("wljd")}),$(document).on("click",function(){$(".img-modal").remove(),$(".page-overlay").css("display","none")}),$(".container").on("click",".modal-meta-top .close",function(){$(".img-modal").remove(),$(".page-overlay").css("display","none")});var e=2;$(".container").on("click",".more-comments-link",function(){var t=$(this).attr("id"),n=parseInt(t.substring(14,t.length));$.ajax({type:"GET",url:"/get_modal_comments",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:{post_id:n,page:e},success:function(){e+=1}})}),$(".container").on("click",".comment-section span.glyphicon-remove",function(){if(window.confirm("Are you sure?")){var e=$(this).attr("id"),n=parseInt(e.substring(15,e.length));$.ajax({type:"DELETE",url:"/comments",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:{comment_id:n,authenticity_token:t}})}}),$(".container").on("keypress",".comment-text-area",function(e){13!=e.which||e.shiftKey||($form=$(this).closest("form")[0],$.ajax({url:"/modal_comments",headers:{Accept:"text/javascript; charset=utf-8","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},type:"POST",data:{comment:{content:$($form).find('textarea[name="content"]').val(),profile_id:$($form).find('input[name="profile_id"]').val(),post_id:$($form).find('input[name="post_id"]').val()},authenticity_token:t}}))})});